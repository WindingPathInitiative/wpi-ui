<form #signupForm="ngForm" (submit)="onRegister(signupForm)" class="form-signin" method="POST" action="#" role="form">
	<div #formTop class="form-group">
		<h2>Create account</h2>
	</div>
	<div [hidden]="errorMessage==null" class="alert alert-danger">
		{{ errorMessage }}
	</div>
	<div class="form-group row">
		<div class="col-sm-3">
			<label class="col-form-label" for="signupName">Name</label>
			
		</div>
		<div class="col-sm-6">
			<input #signupNameInput name="signupName" id="signupName" type="text" class="form-control" aria-describedby="nameHelpBlock"
				required minlength="2" maxlength="50"
				[(ngModel)]="registrationUser.name"  #signupName="ngModel">
			
			<small id="nameHelpBlock" class="form-text text-muted">Use your full name, for member tracking purposes.</small>
		</div>
		<div class="col-sm-3 alert-secondary" [hidden]="!errorMessage && !(signupName.dirty && signupName.touched)">
				<div>
					<i *ngIf="registrationUser.name && !signupName.errors?.minlength && !signupName.errors?.maxlength" class="material-icons" style="color:green">done</i>
					<i *ngIf="!registrationUser.name || signupName.errors?.minlength || signupName.errors?.maxlength" class="material-icons" style="color:red">clear</i>
					<span>2-50 characters</span>
				</div>
		</div>
	</div>
	<div class="form-group row">
		<label class="col-sm-3 col-form-label" for="signupNickname">Preferred Name</label>
		<div class="col-sm-6">
			<input name="signupNickname" id="signupNickname" type="text" required minlength="2" maxlength="50" class="form-control" aria-describedby="nicknameHelpBlock"
			[(ngModel)]="registrationUser.nickname"  #signupNickname="ngModel">
			<small id="nicknameHelpBlock" class="form-text text-muted">Use Preferred name for how you'd like to be displayed to other users.</small>
		</div>
		<div class="col-sm-3 alert-secondary" [hidden]="!errorMessage && !(signupNickname.dirty && signupNickname.touched)">
			<div>
				<i *ngIf="registrationUser.nickname && !signupNickname.errors?.minlength && !signupNickname.errors?.maxlength" class="material-icons" style="color:green">done</i>
				<i *ngIf="!registrationUser.nickname || signupNickname.errors?.minlength || signupNickname.errors?.maxlength" class="material-icons" style="color:red">clear</i>
				<span>2-50 characters</span>
			</div>
		</div>
	</div>
	<div class="form-group row">
		<label class="col-sm-3 col-form-label" for="signupUsername">Username</label>
		<div class="col-sm-6">
			<input name="signupUsername" id="signupUsername" type="text" class="form-control"
			required minlength="4" maxlength="30" pattern="^[-_a-zA-Z0-9]+$"
			[(ngModel)]="registrationUser.username"  #signupUsername="ngModel">
		</div>
		<div class="col-sm-3 alert-secondary" [hidden]="!errorMessage && !(signupUsername.dirty && signupUsername.touched)">
			<div>
				<i *ngIf="registrationUser.username && !signupUsername.errors?.minlength && !signupUsername.errors?.maxlength" class="material-icons" style="color:green">done</i>
				<i *ngIf="!registrationUser.username || signupUsername.errors?.minlength || signupUsername.errors?.maxlength" class="material-icons" style="color:red">clear</i>
				<span>4-30 characters</span>
			</div>
			<div>
				<i *ngIf="registrationUser.username && !signupUsername.errors?.pattern" class="material-icons" style="color:green">done</i>
				<i *ngIf="!registrationUser.username || signupUsername.errors?.pattern" class="material-icons" style="color:red">clear</i>
				<span>Valid characters (A-Z a-z 0-9 - _)</span>
			</div>
		</div>
	</div>
	<div class="form-group row">
		<label class="col-sm-3 col-form-label" for="signupPassword">Password</label>
		<div class="col-sm-6">
			<input name="signupPassword" id="signupPassword" type="password" class="form-control" aria-describedby="passwordHelpBlock"
				minlength="8" maxlength="50" required pattern="^(?=.*[a-zA-Z])(?=.*\d).*$"
				placeholder="at least 8 characters" length="40" [(ngModel)]="registrationUser.password"
				 #signupPassword="ngModel">
			<small id="passwordHelpBlock" class="form-text text-muted">Passwords must be at least 8 characters, with both letters and numbers</small>
		</div>
		<div [hidden]="!errorMessage && !(signupPassword.dirty && signupPassword.touched)" class="col-sm-3 alert-secondary">
			<div>
				<i *ngIf="registrationUser.password && !signupPassword.errors?.minlength && !signupPassword.errors?.maxlength" class="material-icons" style="color:green">done</i>
				<i *ngIf="!registrationUser.password || signupPassword.errors?.minlength || signupPassword.errors?.maxlength" class="material-icons" style="color:red">clear</i>
				<span>8 - 50 characters</span>
			</div>
			<div>
				<i *ngIf="registrationUser.password && !signupPassword.errors?.pattern" class="material-icons" style="color:green">done</i>
				<i *ngIf="!registrationUser.password || signupPassword.errors?.pattern" class="material-icons" style="color:red">clear</i>
				<span>Contains both numbers and letters</span>
			</div>
			
		</div>
		
	</div>
	<div class="form-group row">
		<label class="col-sm-3 col-form-label" for="signupEmail">Email</label>
		<div class="col-sm-6">
			<input name="signupEmail" id="signupEmail" type="email" class="form-control"
				required minlength="6" maxlength="70" email="true" pattern="^.+\.[a-zA-Z0-9]{2,10}$"
				[(ngModel)]="registrationUser.email"  #signupEmail="ngModel">
		</div>
		<div [hidden]="!errorMessage && !(signupEmail.dirty && signupEmail.touched)" class="col-sm-3 alert-secondary">
			<div>
				<i *ngIf="registrationUser.email && !signupEmail.errors?.minlength && !signupEmail.errors?.maxlength" class="material-icons" style="color:green">done</i>
				<i *ngIf="!registrationUser.email || signupEmail.errors?.minlength || signupEmail.errors?.maxlength" class="material-icons" style="color:red">clear</i>
				<span>6 - 70 characters</span>
			</div>
			<div>
				<i *ngIf="registrationUser.email && !signupEmail.errors?.email && !signupEmail.errors?.pattern" class="material-icons" style="color:green">done</i>
				<i *ngIf="!registrationUser.email || signupEmail.errors?.email || signupEmail.errors?.pattern" class="material-icons" style="color:red">clear</i>
				<span>Valid email address</span>
			</div>
			
		</div>
	</div>
	<div class="form-group row">
		<label class="col-sm-3 col-form-label" for="signupStreetAddress">Address</label>
		<div class="col-sm-6">
			<input name="signupStreetAddress" id="signupStreetAddress" type="text" class="form-control"
			required minlength="2" maxlength="80"
			placeholder="123 Street" length="40"
			[(ngModel)]="registrationUser.addressInfo.street_address" #signupAddress="ngModel">
		</div>
		<div [hidden]="!errorMessage && !(signupAddress.dirty && signupAddress.touched)" class="col-sm-3 alert-secondary">
			<div>
				<i *ngIf="registrationUser.addressInfo.street_address && !signupAddress.errors?.minlength && !signupAddress.errors?.maxlength" class="material-icons" style="color:green">done</i>
				<i *ngIf="!registrationUser.addressInfo.street_address || signupAddress.errors?.minlength || signupAddress.errors?.maxlength" class="material-icons" style="color:red">clear</i>
				<span>2 - 80 characters</span>
			</div>
		</div>
	</div>
	<div class="form-group row">
		<label class="col-sm-3 col-form-label" for="signupCity">City</label>
		<div class="col-sm-6"><input name="signupCity" id="signupCity" type="text" class="form-control"
			required minlength="2" maxlength="80"
			placeholder="Anytown" length="40" [(ngModel)]="registrationUser.addressInfo.locality" #signupCity="ngModel">
		</div>
		<div [hidden]="!errorMessage && !(signupCity.dirty && signupCity.touched)" class="col-sm-3 alert-secondary">
			<div>
				<i *ngIf="registrationUser.addressInfo.locality && !signupCity.errors?.minlength && !signupCity.errors?.maxlength" class="material-icons" style="color:green">done</i>
				<i *ngIf="!registrationUser.addressInfo.locality || signupCity.errors?.minlength || signupCity.errors?.maxlength" class="material-icons" style="color:red">clear</i>
				<span>2 - 80 characters</span>
			</div>
		</div>
	</div>
	<div class="form-group row">
		<label class="col-sm-3 col-form-label" for="signupState">State</label>
		<div class="col-sm-6"><input name="signupState" id="signupState" type="text" class="form-control"
			required minlength="2" maxlength="80"
			placeholder="NJ" length="10" [(ngModel)]="registrationUser.addressInfo.region" #signupState="ngModel">
		</div>
		<div [hidden]="!errorMessage && !(signupState.dirty && signupState.touched)" class="col-sm-3 alert-secondary">
			<div>
				<i *ngIf="registrationUser.addressInfo.region && !signupState.errors?.minlength && !signupState.errors?.maxlength" class="material-icons" style="color:green">done</i>
				<i *ngIf="!registrationUser.addressInfo.region || signupState.errors?.minlength || signupState.errors?.maxlength" class="material-icons" style="color:red">clear</i>
				<span>2 - 80 characters</span>
			</div>
		</div>
	</div>
	<div class="form-group row">
		<label class="col-sm-3 col-form-label" for="signupPostal">Zipcode</label>
		<div class="col-sm-6">
			<input name="signupPostal" name="signupPostal" id="signupPostal" type="text" class="form-control"
				required minlength="2" maxlength="15"
				placeholder="12345" length="10" [(ngModel)]="registrationUser.addressInfo.postal_code" #signupPostal="ngModel">
		</div>
		<div [hidden]="!errorMessage && !(signupPostal.dirty && signupPostal.touched)" class="col-sm-3 alert-secondary">
			<div>
				<i *ngIf="registrationUser.addressInfo.postal_code && !signupPostal.errors?.minlength && !signupPostal.errors?.maxlength" class="material-icons" style="color:green">done</i>
				<i *ngIf="!registrationUser.addressInfo.postal_code || signupPostal.errors?.minlength || signupPostal.errors?.maxlength" class="material-icons" style="color:red">clear</i>
				<span>2 - 15 characters</span>
			</div>
		</div>
	</div>
	<div class="form-group row">
		<label class="col-sm-3 col-form-label" for="signupCountry">Country</label>
		<div class="col-sm-6">
			<input name="signupCountry" id="signupCountry" type="text" class="form-control"
				required minlength="2" maxlength="80"
				placeholder="United States" value="United States" length="20" [(ngModel)]="registrationUser.addressInfo.country" #signupCountry="ngModel">
		</div>
		<div [hidden]="!errorMessage && !(signupCountry.dirty && signupCountry.touched)" class="col-sm-3 alert-secondary">
			<div>
				<i *ngIf="registrationUser.addressInfo.country && !signupCountry.errors?.minlength && !signupCountry.errors?.maxlength" class="material-icons" style="color:green">done</i>
				<i *ngIf="!registrationUser.addressInfo.country || signupCountry.errors?.minlength || signupCountry.errors?.maxlength" class="material-icons" style="color:red">clear</i>
				<span>2 - 80 characters</span>
			</div>
		</div>
	</div>
	<div class="form-group row">
		<label class="col-sm-3 col-form-label" for="signupBirthdate">Birthdate</label>
		<div class="col-sm-6">
			<input
				name="signupBirthdate"
				class="form-control"
				[(ngModel)]="registrationUser.birthdate"
				placeholder="1901-01-01"
				#signupBirthdate="ngModel"
				bsDatepicker
				
				[bsConfig]="{ dateInputFormat: 'YYYY-MM-DD', datepickerMode:'year' }">
		</div>
	</div>
	

	<div class="form-group">
		<button id="signupSubmit" type="submit" class="btn btn-primary" [disabled]="submitting">
			Create your account
		</button>
	</div>
	<hr>
	<p>Already have an account? <a [routerLink]="['/auth/login']"> <i class="fa fa-fw fa-lock"></i>Login</a></p>
</form>

